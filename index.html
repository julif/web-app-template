<!DOCTYPE html>
<html>
  <head>
    <title>Webapp-template </title>
    <meta charset="utf-8" />
    <!-- <meta name="viewport" content="width=device-width"/> -->
    <meta name="viewport" content="width=device-width,  initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <link rel="manifest" href="manifest.json">

    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="img/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="img/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="img/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="img/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="img/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="img/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="img/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="img/apple-touch-icon-152x152.png" />
    <link rel="icon" type="image/png" href="img/favicon-196x196.png" sizes="196x196" />
    <link rel="icon" type="image/png" href="img/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/png" href="img/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="img/favicon-16x16.png" sizes="16x16" />
    <link rel="icon" type="image/png" href="img/favicon-128.png" sizes="128x128" />
    <meta name="application-name" content="&nbsp;"/>
    <meta name="msapplication-TileColor" content="#FFFFFF" />
    <meta name="msapplication-TileImage" content="img/mstile-144x144.png" />
    <meta name="msapplication-square70x70logo" content="img/mstile-70x70.png" />
    <meta name="msapplication-square150x150logo" content="img/mstile-150x150.png" />
    <meta name="msapplication-wide310x150logo" content="img/mstile-310x150.png" />
    <meta name="msapplication-square310x310logo" content="img/mstile-310x310.png" />

    
    <!-- <script src="https://kit.fontawesome.com/83a06a6d8e.js" crossorigin="anonymous"></script> -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script><!-- --- Jquery --- --> 
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <!-- javascript -->
    <script src="js/idioma.js"></script>
    <script src="js/responsive.js"></script>
    <script src="js/lock.js"></script>
    <script src="js/fade_div.js"></script>
     
   
    <!-- css -->
    <link rel="stylesheet" href="style.css"/>
    <link rel="stylesheet" href="css/fullview.css"/>
    <link rel="stylesheet" href="css/splash.css"/>
    <link rel="stylesheet" href="css/splash_art.css"/>

    <style>
     body{font-family: "proxima-nova",sans-serif;}
     .hidden {
	visibility: hidden;
  opacity: 0;
  transition: visibility 0s 0.5s, opacity 0.5s linear;
}

 .version { position: absolute;
    z-index: 10;
    right: 10px;
    bottom: 10px;
    color: white;

}
.icon {
   fill: black; 
}
#splash { 
  /* background-color: #053a4a!important; */
   background-color: black!important; 
  }
  #splash img{ 
 height: 40%;
 width: auto;
  }.preloader {
    margin-left: 15000px;
    position: fixed;
    /* font-family: Franklin Gothic Demi; */

}

    </style>
    
  </head>
  <body onresize="responsive(); iniciar();">
    <section id="contenedor">
      <div id="full">
        <button id="fullwiev" onclick="lock('landscape')" >
            <i class="fa fa-expand"></i>
        </button>
      </div>
       <div class="preloader"><img src="img/splash-art.jpg" id="book"  width="100px;"></div>
      <landscape>
       
        <section id="splash">
          <!-- <div class="loader">Loading...</div>  -->
          <img src="img/julif.svg" >
            <!-- <div class="version"></div> -->
        </section><!-- splash -->
      <section id="splash-art">
        <div class="version" ></div>
       
      </section><!-- splash-art -->
      </landscape>
      <portrait>
        <section class="flex" style="color: black;text-align: center;">
          Please rotate your device! 
        </section>
      </portrait>
    </section>
    <script>
      var splash = document.getElementById("splash");
      var splash_art = document.getElementById("splash-art");



/*   var items = "v.o.1",
    divs = document.getElementsByClassName( 'version' );

[].slice.call( divs ).forEach(function ( div ) {
    div.innerHTML = items;
 */

 
    
    </script>
    <script>


    var loaded_slpash_img = false;

    $( "#book" ).load(function() {
 splash_img_loaded();
});

      function splash_img_loaded(){
         loaded_slpash_img = true;
      }


   
  iniciar();
 

   ["fullscreenchange", "webkitfullscreenchange", "mozfullscreenchange", "msfullscreenchange"].forEach(
     eventType => document.addEventListener(eventType, iniciar_splash(), false)
     );
   // $(document).is(":fullscreen") { iniciar_splash();}

function iniciar() {      

// $(document).is(":fullscreen") { iniciar_splash();}

if( plataform == "desktop" || plataform == "tablet landscape"|| plataform == "smartphone landscape" ){ iniciar_splash(); }

 //iniciar_splash(); 


}

      

      var img_splash_counter = 0;
      function iniciar_splash() {

      
          setInterval(function(){ 
            if (img_splash_counter>10) { 
              // alert("la aplicacion esta tomando demasiado tiempo para cargar, actualizando la app");
              // location.reload();
              window.location.reload(false); 
            }

             if (loaded_slpash_img == true) { fadediv(splash, splash_art); }

             else if(loaded_slpash_img == false){
              //alert(" recargar ");
              img_splash_counter++;
              console.log("carga de img_splash fallido N:"+img_splash_counter);
              iniciar_splash();
            }
         
         }, 4000);

       
        
        
      }//iniciar_splash


      </script>
      <script>
      
  
      </script>
      <script>
        let deferredPrompt;
        const addBtn = document.querySelector('.add-button');
        // addBtn.style.display = 'none';
        </script>
      <script>

if (window.matchMedia('(display-mode: fullscreen)').matches) {  
    // do things here  
    // set a variable to be used when calling something  
    // e.g. call Google Analytics to track standalone use 
    document.getElementById("full").style.display= "none";
     iniciar_splash();

} 



        window.addEventListener('beforeinstallprompt', (e) => {
          // Prevent Chrome 67 and earlier from automatically showing the prompt
          e.preventDefault();
          // Stash the event so it can be triggered later.
          deferredPrompt = e;
          // Update UI to notify the user they can add to home screen
          addBtn.style.display = 'block';
          showAddToHomeScreen();
        
        
          addBtn.addEventListener('click', (e) => {
            // hide our user interface that shows our A2HS button
            addBtn.style.display = 'none';
            // Show the prompt
            deferredPrompt.prompt();
            // Wait for the user to respond to the prompt
            deferredPrompt.userChoice.then((choiceResult) => {
                if (choiceResult.outcome === 'accepted') {
                  console.log('User accepted the A2HS prompt');
                } else {
                  console.log('User dismissed the A2HS prompt');
                }
                deferredPrompt = null;
              });
          });
        });
        </script>
        <!-- service worker -->
          <script type="text/javascript">
  
            if (navigator.serviceWorker) {
            navigator.serviceWorker.register('sw.js').then(function(registration) {
              console.log('ServiceWorker registration successful with scope:',  registration.scope);
            }).catch(function(error) {
              console.log('ServiceWorker registration failed:', errror);
            });
          }
          </script>
          <script src="js/version.js"></script>
           <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script><!-- --- Jquery --- --> 
  </body>
 
</html>