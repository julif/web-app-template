<!DOCTYPE html>
<html>
  <head>
    <title>Webapp</title>
    <meta charset="utf-8" />
    <!-- <meta name="viewport" content="width=device-width"/> -->
    <meta name="viewport" content="width=device-width,  initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <link rel="manifest" href="manifest.json">

    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="img/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="img/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="img/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="img/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="img/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="img/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="img/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="img/apple-touch-icon-152x152.png" />
    <link rel="icon" type="image/png" href="img/favicon-196x196.png" sizes="196x196" />
    <link rel="icon" type="image/png" href="img/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/png" href="img/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="img/favicon-16x16.png" sizes="16x16" />
    <link rel="icon" type="image/png" href="img/favicon-128.png" sizes="128x128" />
    <meta name="application-name" content="&nbsp;"/>
    <meta name="msapplication-TileColor" content="#FFFFFF" />
    <meta name="msapplication-TileImage" content="img/mstile-144x144.png" />
    <meta name="msapplication-square70x70logo" content="img/mstile-70x70.png" />
    <meta name="msapplication-square150x150logo" content="img/mstile-150x150.png" />
    <meta name="msapplication-wide310x150logo" content="img/mstile-310x150.png" />
    <meta name="msapplication-square310x310logo" content="img/mstile-310x310.png" />

    
    <!-- <script src="https://kit.fontawesome.com/83a06a6d8e.js" crossorigin="anonymous"></script> -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script><!-- --- Jquery --- --> 
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <!-- javascript -->
    <script src="js/idioma.js"></script>
    <script src="js/responsive.js"></script>
    <script src="js/lock.js"></script>
    <!-- css -->
    <link rel="stylesheet" href="style.css"/>
    <link rel="stylesheet" href="css/fullview.css"/>
    <link rel="stylesheet" href="css/splash.css"/>

    <style>
     
     .hidden {
	visibility: hidden;
  opacity: 0;
  transition: visibility 0s 0.5s, opacity 0.5s linear;
}

    </style>
    
  </head>
  <body >
    <section id="contenedor">
      <div id="full">
        <button id="fullwiev" onclick="lock('landscape')" >
            <i class="fa fa-expand"></i>
        </button>
      </div>
      <landscape>
        <section id="splash">
          <div class="loader">Loading...</div> 
        </section><!-- splash -->
      <section id="splash-art" style="display: none;">
        splash art
      </section><!-- splash-art -->
      </landscape>
      <portrait>
        <section class="flex" style="color: black;text-align: center;">
          Please rotate your device! 
        </section>
      </portrait>
    </section>
    <script>
      var splash = document.getElementById("splash");
      var splash_art = document.getElementById("splash-art");
    
    </script>
    <script>
      myFunction();
      function myFunction() {
        setInterval(function(){ 
          // alert("Hello"); 
          // document.getElementById("splash").style.display = "none";document.getElementById("splash-art").style.display = "inherit";
          fadediv(splash, splash_art); }, 3000);
      }
      </script>
      <script>
      
        // esto podria ir en su propio js
  function fadediv(p1, p2){
    p1.style.zIndex = "3"; // 1- div1 adelante
    p2.style.zIndex = "1";// 2- div2  atras
    p2.style.display="flex";// 3- hacer que aparezca el div de atras
    p2.classList.remove("hidden");// 4- asegurarse que no esta invisible
    p1.classList.add("hidden");// 5- fade effect
     
    var myVar = setTimeout(ocultardiv, 500);// 6- after fade
    function ocultardiv() { p1.style.display="none";}
   
  }
      </script>
      <script>
        let deferredPrompt;
        const addBtn = document.querySelector('.add-button');
        addBtn.style.display = 'none';
        </script>
      <script>

if (window.matchMedia('(display-mode: fullscreen)').matches) {  
    // do things here  
    // set a variable to be used when calling something  
    // e.g. call Google Analytics to track standalone use 
    document.getElementById("full").style.display= "none";

} 



        window.addEventListener('beforeinstallprompt', (e) => {
          // Prevent Chrome 67 and earlier from automatically showing the prompt
          e.preventDefault();
          // Stash the event so it can be triggered later.
          deferredPrompt = e;
          // Update UI to notify the user they can add to home screen
          addBtn.style.display = 'block';
          showAddToHomeScreen();
        
        
          addBtn.addEventListener('click', (e) => {
            // hide our user interface that shows our A2HS button
            addBtn.style.display = 'none';
            // Show the prompt
            deferredPrompt.prompt();
            // Wait for the user to respond to the prompt
            deferredPrompt.userChoice.then((choiceResult) => {
                if (choiceResult.outcome === 'accepted') {
                  console.log('User accepted the A2HS prompt');
                } else {
                  console.log('User dismissed the A2HS prompt');
                }
                deferredPrompt = null;
              });
          });
        });
        </script>
          <script type="text/javascript">
  
            if (navigator.serviceWorker) {
            navigator.serviceWorker.register('sw.js').then(function(registration) {
              console.log('ServiceWorker registration successful with scope:',  registration.scope);
            }).catch(function(error) {
              console.log('ServiceWorker registration failed:', errror);
            });
          }
          </script>
  </body>
 
</html>